<!DOCTYPE html>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  
  <title itemprop="name">操作系统 | xixfeng</title>
  
    <link rel="shortcut icon" href="/images/favicon.ico">
  
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+SerifMerriweather|Merriweather+Sans|Source+Code+Pro|Ubuntu:400,700|Noto+Serif+SC" media="all">
  <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
  <link rel="stylesheet" id="saukra_css-css" href="/css/style.css" type="text/css" media="all">
  <link rel="stylesheet" href="/css/lib.min.css" media="all">
  <link rel="stylesheet" href="/css/font.css" media="all">
  <link rel="stylesheet" href="/css/insight.css" media="all">
  <link rel="stylesheet" href="/css/jquery.fancybox.min.css" media="all">
  <link rel="stylesheet" href="/css/zoom.css" media="all">
  <link rel="stylesheet" type="text/css" href="/css/sharejs.css">
<!--   <link rel="stylesheet" id="saukra_css-css" href="https://2heng.xin/wp-content/cache/autoptimize/css/autoptimize_ad42a61f4c7d4bdd9f91afcff6b5dda5.css
" type="text/css" media="all"> -->
  <script>
  /*Initial Variables*/
  var mashiro_option = new Object();
  var mashiro_global = new Object();
  mashiro_option.NProgressON = true;
  /* 
   * 邮箱信息之类的东西可以填在这里，这些js变量基本都作用于sakura-app.js
   * 这样的设置仅是为了方便在基于PHP开发的主题中设置js变量，既然移植到了Node上，我想或许可以精简这一逻辑吧
   */
  mashiro_option.email_domain = "";
  mashiro_option.email_name = "";
  mashiro_option.cookie_version_control = "";
  mashiro_option.qzone_autocomplete = false;
  mashiro_option.site_name = "katoxixfeng";
  mashiro_option.author_name = "xixfeng";
  mashiro_option.site_url = "https://xixfeng.github.io";
  mashiro_option.v_appId = "GyC3NzMvd0hT9Yyd2hYIC0MN-gzGzoHsz";
  mashiro_option.v_appKey = "mgOpfzbkHYqU92CV4IDlAUHQ";
  mashiro_option.mathjax = "0";
  mashiro_option.qq_api_url = "https://api.mashiro.top/qqinfo/"; 
  mashiro_option.qq_avatar_api_url = "https://api.mashiro.top/qqinfo/";

  // mashiro_option.jsdelivr_css_src = "https://cdn.jsdelivr.net/gh/moezx/cdn@3.4.5/css/lib.min.css";
  // mashiro_option.float_player_on = true;

  /*End of Initial Variables*/
  </script>
  <script type="text/javascript">
  var bg = "https://cdn.jsdelivr.net/gh/moezx/cdn@3.6.8/cover/webp/AK-01.jpg.webp,https://cdn.jsdelivr.net/gh/moezx/cdn@3.6.8/cover/webp/AK-02.jpg.webp,https://cdn.jsdelivr.net/gh/moezx/cdn@3.6.8/cover/webp/AK-03.jpg.webp,https://cdn.jsdelivr.net/gh/moezx/cdn@3.6.8/cover/webp/AK-04.jpg.webp,https://cdn.jsdelivr.net/gh/moezx/cdn@3.6.8/cover/webp/AK-05.jpg.webp".split(",");
  var bgindex = Math.floor(Math.random()*bg.length);
  if (!!window.ActiveXObject || "ActiveXObject" in window) { //is IE?
    alert('朋友，IE浏览器未适配哦~');
  }
  </script>
  <style type="text/css">
  .hljs-ln{border-collapse:collapse}.hljs-ln td{padding:0}.hljs-ln-n:before{content:attr(data-line-number)}
  </style>
  <style type="text/css">.site-top .lower nav{display:block !important;}.author-profile i,.post-like a,.post-share .show-share,.sub-text,.we-info a,span.sitename,.post-more i:hover,#pagination a:hover,.post-content a:hover,.float-content i:hover{color:#FE9600}.feature i,.download,.navigator i:hover,.links ul li:before,.ar-time i,span.ar-circle,.object,.comment .comment-reply-link,.siren-checkbox-radio:checked + .siren-checkbox-radioInput:after{background:#FE9600}::-webkit-scrollbar-thumb{background:#FE9600}.download,.navigator i:hover,.link-title,.links ul li:hover,#pagination a:hover,.comment-respond input[type='submit']:hover{border-color:#FE9600}.entry-content a:hover,.site-info a:hover,.comment h4 a,#comments-navi a.prev,#comments-navi a.next,.comment h4 a:hover,.site-top ul li a:hover,.entry-title a:hover,#archives-temp h3,span.page-numbers.current,.sorry li a:hover,.site-title a:hover,i.iconfont.js-toggle-search.iconsearch:hover,.comment-respond input[type='submit']:hover{color:#FE9600}.comments .comments-main{display:block !important;}.comments .comments-hidden{display:none !important;}background-position:center center;background-attachment:inherit;}
  </style>
</head>
</html>
<body class="page-template page-template-user page-template-page-analytics page-template-userpage-analytics-php page page-id-1297 chinese-font serif isWebKit">
  <div class="scrollbar" id="bar">
  </div>
  <a href="#" class="cd-top faa-float animated"></a>
  <section id="main-container">
    <div class="headertop filter-dot">
  <div id="banner_wave_1"></div>
  <div id="banner_wave_2"></div>
  <figure id="centerbg" class="centerbg">
    <div class="focusinfo no-select">
      <div class="header-tou">
        <a href="https://xixfeng.github.io">
          <img src="http://api.xixfeng.cn/IMG_4096.JPG">
        </a>
      </div>
      <div class="header-info">
        <p>Live your life with passion! With some drive!</p>
        <div class="top-social_v2">
          <li id="bg-pre">
            <img class="flipx" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
          
            
              
                <li>
                  <a href="http://github.com/xixfeng" target="_blank" class="social-github" title="github">
                    <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/social/github.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://www.zhihu.com/people/xi-feng-88-58/activities" target="_blank" class="social-github" title="zhihu">
                    <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/social/zhihu.png">
                  </a>
                </li>
              
            
          
          <li id="bg-next">
            <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
        </div>
      </div>
    </div>
  </figure>
  <div id="video-container" style>
    <video style="object-fit: fill" id="bgvideo" class="video" video-name src width="auto" preload="auto">
    </video>
    <div id="video-btn" class="loadvideo videolive">
    </div>
    <div id="video-add">
    </div>
    <div class="video-stu">
    </div>
  </div>
  <div class="headertop-down faa-float animated" onclick="headertop_down()">
    <span>
      <i class="fa fa-chevron-down" aria-hidden="true">
      </i>
    </span>
  </div>
</div>
    <div id="page" class="site wrapper">
      <header class="site-header no-select gizle sabit" role="banner">
  <div class="site-top">
    <div class="site-branding">
      <span class="site-title">
        <span class="logolink moe-mashiro">
          <a href="/">
            <span class="sakurasono">kato</span>
            <span class="shironeko">xixfeng</span>
          </a>
        </span>
      </span>
    </div>
    <div class="searchbox search-form-submit">
      <i class="iconfont js-toggle-search iconsearch icon-search">
      </i>
    </div>
    <div id="show-nav" class="showNav mobile-fit">
      <div class="line line1">
      </div>
      <div class="line line2">
      </div>
      <div class="line line3">
      </div>
    </div>
    <div class="lower-cantiner">
      <div class="lower">
        <nav class="mobile-fit-control hide">
          <ul id="menu-new" class="menu">
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
                    首页
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/archives">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-archive faa-shake" aria-hidden="true"></i>
                    归档
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/categories/技术/">
                          <i class="fa fa-code" aria-hidden="true"></i>
                          技术
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/生活/">
                          <i class="fa fa-file-text-o" aria-hidden="true"></i>
                          生活
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/资源/">
                          <i class="fa fa-cloud-download" aria-hidden="true"></i>
                          资源
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/随想/">
                          <i class="fa fa-commenting-o" aria-hidden="true"></i>
                          随想
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/转载/">
                          <i class="fa fa-book" aria-hidden="true"></i>
                          转载
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="javascript:;">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-list-ul faa-vertical" aria-hidden="true"></i>
                    清单
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/tags/悦读/">
                          <i class="fa fa-th-list faa-bounce" aria-hidden="true"></i>
                          书单
                        </a>
                      </li>
                    
                      <li>
                        <a href="/bangumi/">
                          <i class="fa fa-film faa-vertical" aria-hidden="true"></i>
                          番组
                        </a>
                      </li>
                    
                      <li>
                        <a href="/music/">
                          <i class="fa fa-headphones" aria-hidden="true"></i>
                          歌单
                        </a>
                      </li>
                    
                      <li>
                        <a href="/tags/图集/">
                          <i class="fa fa-photo" aria-hidden="true"></i>
                          图集
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-leaf faa-wrench" aria-hidden="true"></i>
                    关于
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/about/">
                          <i class="fa fa-meetup" aria-hidden="true"></i>
                          我？
                        </a>
                      </li>
                    
                      <li>
                        <a href="/theme-sakura/">
                          <i class="fa iconfont icon-sakura" aria-hidden="true"></i>
                          主题
                        </a>
                      </li>
                    
                      <li>
                        <a href="/lab/">
                          <i class="fa fa-cogs" aria-hidden="true"></i>
                          Lab
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="/client/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-android faa-vertical" aria-hidden="true"></i>
                    客户端
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/atom.xml">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-rss faa-pulse" aria-hidden="true"></i>
                    RSS
                  </span>
                </a>
                
              </li>
            
          </ul>
        </nav>
      </div>
    </div>
  </div>
</header>

      <link rel="stylesheet" type="text/css" href="/css/sharejs.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">
<div class="pattern-center-blank"></div>

<div id="content" class="site-content">
  <div id="primary" class="content-area">
    <main id="main" class="site-main" role="main">
      <article id="post-1" class="post-1 post type-post status-publish format-standard has-post-thumbnail hentry category-uncategorized">
        <div class="toc"></div>
        <!--<div class="toc-entry-content"><!-- 套嵌目录使用（主要为了支援评论）-->
        
          <header class="entry-header">
            <h1 class="entry-title">操作系统</h1>
            <p class="entry-census">&nbsp;·&nbsp;2019-6-13&nbsp;·&nbsp;<span id="busuanzi_value_page_pv"></span>次阅读</p><p></p>

            <hr>
          </header>
        
        <div class="entry-content">
          <h1 id="计算机组成"><a href="#计算机组成" class="headerlink" title="计算机组成"></a>计算机组成</h1><ul>
<li>处理器(CPU)：控制计算机的操作，执行数据处理功能</li>
<li>内存(memory)：存储数据和程序</li>
<li>输入/输出模块(I/O modules)：在计算机与外部环境之间移动数据</li>
<li>系统总线：在处理器、内存和输入/输出模块间提供通信的设施</li>
</ul>
<h1 id="操作系统概述"><a href="#操作系统概述" class="headerlink" title="操作系统概述"></a>操作系统概述</h1><p>操作系统:控制应用程序执行的程序，是应用程序与计算机硬件之间的接口，负责管理计算机硬件和软件资源<br>目标：</p>
<ul>
<li>方便</li>
<li>有效</li>
<li>扩展能力<br>主要成就:</li>
<li>进程</li>
<li>调度和资源管理</li>
<li>内存管理</li>
<li>信息保护和安全</li>
</ul>
<h2 id="多个处理系统"><a href="#多个处理系统" class="headerlink" title="多个处理系统"></a>多个处理系统</h2><h3 id="简单批处理系统"><a href="#简单批处理系统" class="headerlink" title="简单批处理系统"></a>简单批处理系统</h3><p>简单批处理系统的中心思想是<strong>监控程序</strong>。将命令一次性输入，交由监控程序执行。</p>
<p>作业控制语言(Job Control language,JCL)是简单批处理系统的处理语言</p>
<p>用户模式，内核模式只有后者能执行<strong>特权指令</strong></p>
<h3 id="多道批处理系统"><a href="#多道批处理系统" class="headerlink" title="多道批处理系统"></a>多道批处理系统</h3><p>解决处理器空闲状态(等待I/O)，内存空间可以保存常驻监控程序和两个用户程序，那么当一个作业需要等待I/O时，处理器可以切换到另一个程序执行。这种处理成为<strong>多道程序处理(multiprogramming)</strong>或<strong>多任务处理(multitasking)</strong></p>
<h3 id="分时系统"><a href="#分时系统" class="headerlink" title="分时系统"></a>分时系统</h3><p>多道程序设计允许处理器同时处理多个批作业，还可以处理多个交互系统。对于后者而言，由于多个用户分享处理器时间，因而该技术称为<strong>分时系统(time sharing)</strong></p>
<p>总结：简单批处理系统内存中只能容纳一个用户程序和操作系统(常驻监控程序)，无法在等待时切换，而多道可以容纳多个用户程序，又因为多道允许处理多个<strong>批处理</strong>（batch processing)而形成了分时系统</p>
<h2 id="现代操作系统的特征"><a href="#现代操作系统的特征" class="headerlink" title="现代操作系统的特征"></a>现代操作系统的特征</h2><p>单体内核(monolithic kernel)：操作系统的大部分功能都由大内核来提供</p>
<p>微内核(microkernel architecture)：只给内核分配一些最基本的功能，其他服务则由运行在用户模式的其他线程提供</p>
<p>多线程(multithreading)：把执行一个应用程序的进程划分为可以同时运行的多个线程</p>
<h1 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h1><p>进程(进程映像，是进程执行的上下文环境)由程序代码+进程控制块（process control block，PCB)+数据</p>
<p>PCB:由标识符、状态、优先级、程序计数器、内存指针、上下文数据、I/O状态信息、记账信息组成</p>
<h2 id="两状态模型"><a href="#两状态模型" class="headerlink" title="两状态模型"></a>两状态模型</h2><p>running and not running</p>
<h2 id="五状态模型"><a href="#五状态模型" class="headerlink" title="五状态模型"></a>五状态模型</h2><ul>
<li>新建态：刚刚创建的进程，操作系统还未把它加入可执行进程组，它通常是进程控制块已经创建但<strong>还未加载到内存中的新进程</strong></li>
</ul>
<p><img src="http://api.xixfeng.cn/mweb/15604212399738.jpg" align="center" style="border-radius:20px;background-color: white;box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);width: 100%"></p>
<p>五状态模型的缺点：可能全部进程都进入了阻塞态（因为I/O），而此时cpu就会空闲</p>
<p>##七状态模型<br>当内存中不存在就绪态的程序时，操作系统就把阻塞的进程换出到磁盘的挂起队列中(suspend queue)，而此时就必须要增加另一个状态：挂起态<br>而挂起态又可分为<strong>阻塞/挂起态</strong>和<strong>就绪/挂起态</strong><br><img src="http://api.xixfeng.cn/mweb/15604230763161.jpg" align="center" style="border-radius:20px;background-color: white;box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);width: 100%"></p>
<h2 id="执行模式"><a href="#执行模式" class="headerlink" title="执行模式"></a>执行模式</h2><ul>
<li>非特权模式：用户模式</li>
<li>特权模式：系统模式、内核模式、控制模式</li>
</ul>
<p>使用两种模式的原因是保护操作系统和重要的操作系统表(如进程控制块)不受用户程序的干扰。在内核模式下，软件会完全控制处理器及其所有指令、寄存器和内存。为安全起见，这种级别的控制对用户程序来说完全没有必要。</p>
<h1 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h1><p><strong>线程和进程的区别：</strong></p>
<ul>
<li>线程：可以分配的最小工作单元，轻量级进程(LWP)</li>
<li>进程：资源所有权的单元</li>
</ul>
<p>用户级线程和内核级线程都是指在<strong>一个进程中的线程管理</strong></p>
<h2 id="用户级线程"><a href="#用户级线程" class="headerlink" title="用户级线程"></a>用户级线程</h2><p>用户级线程(user-level thread,ULT)中管理线程的所有工作都由应用程序完成<br>优点：</p>
<ul>
<li>所有线程数据结构都在一个进程的用户地址空间中，<strong>线程切换不需要内核模式特权</strong>，节省了两次状态转换的开销</li>
<li>调度因应用程序的不同而不同</li>
<li>ULT可在任何操作系统中运行，不需要对底层内核进行修改以支持ULT</li>
</ul>
<p>缺点：</p>
<ul>
<li>无法将一个进程中的多个线程调度到多个处理器</li>
<li>在ULT执行一个系统调用时，不仅会阻塞这个线程，也会阻塞进程中的所有线程</li>
</ul>
<h2 id="内核集线程"><a href="#内核集线程" class="headerlink" title="内核集线程"></a>内核集线程</h2><p>内核集线程(kernel-level thread,KLT)中管理线程的工作均由内核完成<br>优点：</p>
<ul>
<li>可以同时把一个进程中的多个线程调度到多个处理器</li>
<li>当前线程阻塞时，系统可以调用其他进程中其他线程</li>
<li>内核自身也是可多线程的</li>
</ul>
<p>缺点：</p>
<ul>
<li>切换模式十分消耗时间</li>
</ul>
<h1 id="并发性：互斥和同步"><a href="#并发性：互斥和同步" class="headerlink" title="并发性：互斥和同步"></a>并发性：互斥和同步</h1><ul>
<li>原子操作：一个函数或动作由多个指令的序列实现，要保证这个序列要么都执行，要么都不执行</li>
<li>临界区(critical section)：一段代码，在这段代码中进程将访问共享资源，当另外一个进程已在这段代码运行时，其他进程就不能在这段代码中运行</li>
<li>死锁：两个或两个以上的进程都在等待其他进程做完某些事情而不能继续执行的情况</li>
<li>活锁：两个或两个以上的进程为响应其他进程中的变化而持续改变自己的状态<strong>但不做有用功但清形</strong></li>
<li><strong>互斥</strong>(mutual exclusion)：当一个进程在临界区访问共享资源时，其他进程不能进入该区域</li>
<li>竞争条件(race condition)：多个线程或进程在读写一个共享数据时，结果依赖于他们执行的相对时间的情形</li>
<li>饥饿：一个可运行的进程尽管能继续执行，但被调度程序无限期地忽视，而不能执行但情况</li>
<li>临界资源(critical resource)<h2 id="互斥：硬件的支持"><a href="#互斥：硬件的支持" class="headerlink" title="互斥：硬件的支持"></a>互斥：硬件的支持</h2></li>
</ul>
<ol>
<li>禁用中断、启用中断</li>
<li>专用及其指令</li>
</ol>
<h2 id="信号量"><a href="#信号量" class="headerlink" title="信号量"></a>信号量</h2><ul>
<li>信号量：用于进程间传递信号的一个整数值</li>
<li>二元信号量：只取0值或1值的信号量</li>
<li>互斥量：类似于二元信号量。关键区别在于为其加锁(设定值为0)的进程和为其解锁(设定值为1)的进程必须为同一个</li>
</ul>
<p>二元信号量来自信号量但是二者的<strong>semWait和semSignal有点不同</strong></p>
<ol>
<li>信号量<pre><code class="C">struct semaphore{
 int count;
 queueType queue;
};
void semWait(semaphore s){
 s.count--;
 if(s.count&lt;0){
     //把当前进程加入队列
     //阻塞当前进程
 }
void semSignal(semaphore s){
 s.count++
 if(s.count &lt;= 0){
     //将进程P从队列中移除
     //把进程P插入就绪队列
 }
}
}
</code></pre>
</li>
<li>互斥量<pre><code class="c">struct binary_semaphore{
 enum {zero, one} value;
 queueType queue;
};
void semWaitB(binary_semaphore s){
 if(s.value == one)
     s.value = zero
 else{
     //将当前进程插入队列
     //阻塞当前进程
 }
void semSignalB(binary_semaphore s){
 if(s.queue is empty())
     s.value = one;
 else{
     //把进程p从等待队列中移除
     //把进程p插入就绪队列
 }
}
}
</code></pre>
</li>
</ol>
<h1 id="并发：死锁和饥饿"><a href="#并发：死锁和饥饿" class="headerlink" title="并发：死锁和饥饿"></a>并发：死锁和饥饿</h1><ul>
<li>可重用资源：可重用资源是指一次仅供一个进程安全使用且不因使用而耗尽的资源</li>
<li>可消耗资源：是指可被创建和销毁的资源</li>
</ul>
<p>死锁的条件</p>
<ul>
<li>互斥</li>
<li>占有且等待</li>
<li>不可抢占</li>
<li><strong>循环等待</strong>：存在一个封闭的进程链，每个进程至少占有次链中下一个进程所需的一个资源</li>
</ul>
<p align="center">资源分配图</p>

<p>  <img src="http://api.xixfeng.cn/mweb/15604306334735.jpg" align="center" style="border-radius:20px;background-color: white;box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);width: 100%"></p>
<h2 id="死锁预防"><a href="#死锁预防" class="headerlink" title="死锁预防"></a>死锁预防</h2><p>使上述四个条件之一无法满足，但互斥无法禁止<br>缺点：会导致低效的资源利用</p>
<h2 id="死锁避免"><a href="#死锁避免" class="headerlink" title="死锁避免"></a>死锁避免</h2><ul>
<li>若有一个进程的请求会导致死锁，则不启动该进程</li>
<li>若有一个进程增加的资源请求会导致死锁，则不允许这一资源分配</li>
</ul>
<h3 id="银行家算法"><a href="#银行家算法" class="headerlink" title="银行家算法"></a>银行家算法</h3><p>银行家算法：在分配给线程资源之前，能不能保证<strong>安全状态</strong><br>安全状态：指至少有一个资源分配序列不会导致死锁</p>
<p>缺点：</p>
<ul>
<li>必须事先指导每个进程请求的最大资源数</li>
<li>所讨论的进程必须是无关的，即他们的执行顺序没有任何同步要求的限制</li>
<li>分配的资源数量必须是固定的</li>
<li>在占有资源的时，进程不能退出</li>
</ul>
<h2 id="死锁检测"><a href="#死锁检测" class="headerlink" title="死锁检测"></a>死锁检测</h2><h3 id="死锁检测算法"><a href="#死锁检测算法" class="headerlink" title="死锁检测算法"></a>死锁检测算法</h3><p>检测目前这种资源情况是否会引起死锁，如果引起死锁是因为哪些线程</p>
<h3 id="恢复"><a href="#恢复" class="headerlink" title="恢复"></a>恢复</h3><p>既然检测出死锁那么如何避免死锁</p>
<ol>
<li>取消所有死锁进程</li>
<li>将死锁进程回滚</li>
<li>连续取消死锁进程直到不再存在死锁</li>
<li>连续抢占资源</li>
</ol>
<h2 id="哲学家qia饭问题"><a href="#哲学家qia饭问题" class="headerlink" title="哲学家qia饭问题"></a>哲学家qia饭问题</h2><h1 id="内存管理"><a href="#内存管理" class="headerlink" title="内存管理"></a>内存管理</h1><p>伙伴系统(Buddy system)：一种综合内存固定分区与动态分区策略</p>
<h2 id="内存管理的需求"><a href="#内存管理的需求" class="headerlink" title="内存管理的需求"></a>内存管理的需求</h2><ul>
<li>重定位：把进程重定位(relocate)到内存到不同区域</li>
</ul>
<h2 id="内存分区"><a href="#内存分区" class="headerlink" title="内存分区"></a>内存分区</h2><p> <img src="http://api.xixfeng.cn/mweb/15604331923519.jpg" align="center" style="border-radius:20px;background-color: white;box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);width: 100%"></p>
<ul>
<li>逻辑地址：是指与当前数据在内存中的物理地址无关的访问地址</li>
</ul>
<h3 id="分页"><a href="#分页" class="headerlink" title="分页"></a>分页</h3><p>分页(page)</p>
<ul>
<li>页(page)：进程中的块</li>
<li>页框(frame)：内存中的块</li>
<li>页表(page table)：给出页对应的页框</li>
<li>固定分区(fixed partitioning)：将系统内存分为大小固定的块,但是这些块大小可以相等，也可以不等(就是实现就把内存给划分好了)<br><img src="http://api.xixfeng.cn/mweb/15604337097636.jpg" align="center" style="border-radius:20px;background-color: white;box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);width: 100%"></li>
</ul>
<h3 id="分段"><a href="#分段" class="headerlink" title="分段"></a>分段</h3><p>分段(segment)<br> <img src="http://api.xixfeng.cn/mweb/15605158079883.jpg" align="center" style="border-radius:20px;background-color: white;box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);width: 100%"><br> 根据段号找到物理地址，再将物理地址与偏移量相加</p>
<h2 id="虚拟内存"><a href="#虚拟内存" class="headerlink" title="虚拟内存"></a>虚拟内存</h2><ul>
<li>虚拟内存：在存储分配机制中，尽管备用内存是主存的一部分，但它也可被寻址</li>
<li>虚拟地址：在虚拟内存中分配给某一位置的地址</li>
<li>常驻集(resident set)：常驻集指虚拟页式管理中给进程分配的物理页面数目(内存)。</li>
</ul>
<p><img src="http://api.xixfeng.cn/mweb/15604345685771.jpg" align="center" style="border-radius:20px;background-color: white;box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);width: 100%"></p>
<h3 id="分页-1"><a href="#分页-1" class="headerlink" title="分页"></a>分页</h3><h4 id="TLB"><a href="#TLB" class="headerlink" title="TLB"></a>TLB</h4><p><img src="http://api.xixfeng.cn/mweb/15604346529706.jpg" align="center" style="border-radius:20px;background-color: white;box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);width: 100%"></p>
<h4 id="置换策略"><a href="#置换策略" class="headerlink" title="置换策略"></a>置换策略</h4><p>在使用虚拟分页的时候，我们会出现一些页在内存中，一些页在辅存中，当我们需要从辅存中取出页时，应该换出内存中哪一页，这就是置换策略</p>
<ul>
<li>OPT：替换未来中最后使用的页</li>
<li>LRU：置换内存中最长时间未被引用的页</li>
<li>Clock(使用位)：使用位初始为1，某页被访问后使用位置为1，指针在扫描到0时停止，当指针扫过页时，变为0。</li>
<li>Clock(使用位,修改位)：老大就是既被使用也被修改的块<ul>
<li>1.寻找(0,0)的页 </li>
<li>2.若1失败，查找(0,1),将每个扫描到的使用位变为0</li>
<li>3.第二步失败，重复1和2 </li>
</ul>
</li>
</ul>
<p><img src="http://api.xixfeng.cn/mweb/15604352390797.jpg" align="center" style="border-radius:20px;background-color: white;box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);width: 100%"></p>
<h1 id="调度算法"><a href="#调度算法" class="headerlink" title="调度算法"></a>调度算法</h1><ul>
<li>长程调度：新建态-&gt;就绪/挂起态  新建态-&gt;就绪态</li>
<li>中程调度：就绪/挂起态-&gt;就绪态</li>
<li>短程调度：就绪态-&gt;运行态</li>
</ul>
<p>调度算法研究的是短程调度</p>
<ul>
<li>服务时间： 进程占用cpu的时间</li>
<li>周转时间：进程等待时间+服务时间</li>
<li>归一化周转时间：周转时间/服务时间</li>
</ul>
<p>分配器(dispatcher)：在短程调度的时候，将cpu操作权限交付给进程</p>
<p>选择函数(selection function) </p>
<ul>
<li>FCFS</li>
<li>轮转(RR)：每个线程占用cpu一段时间,VRR避免了处理器密集型比I/O密集型占用了更多的cpu时间</li>
<li>最短进程优先(SPN,shortest Process Next)：非抢占 选择预计处理时间最短的</li>
<li>最短剩余时间(SPT)：在最短进程优先上加入抢占机制</li>
<li>最高响应比优先(HRRN)：最小归一化周转时间，当前进程完成或堵塞时，选择R值最大当就绪进程。不可抢占</li>
<li>反馈法</li>
</ul>
<p>决策模式(decision mode)：抢占式还是非抢占式</p>
<p>HRRN的优点：FCFS方式只考虑每个作业的等待时间而未考虑执行时间的长短，而SPT方式只考虑执行时间而未考虑等待时间的长短。HRRN既考虑了等待时间也考虑了执行时间，避免了线程的饥饿</p>
<h1 id="输入、输出文件"><a href="#输入、输出文件" class="headerlink" title="输入、输出文件"></a>输入、输出文件</h1><ul>
<li>三种I/O技术<br>程序控制的I/O、中断控制的I/O、直接存储器访问(DMA)</li>
</ul>
<ul>
<li>寻道时间：将磁头臂移动到指定磁道道时间</li>
<li>旋转延迟：将磁盘待访问的区域移动到读/写磁头可以访问到的位置所需的时间</li>
<li>传输时间：向磁盘读取/输入的时间，磁盘的旋转速度为3600-15000rpm，其中15000rpm相当于每4ms旋转一周</li>
<li>平均时间：从头到中所需的时间<h2 id="磁盘调度策略"><a href="#磁盘调度策略" class="headerlink" title="磁盘调度策略"></a>磁盘调度策略</h2></li>
<li>FIFO</li>
<li>SSTF：找到最近的磁道，可能使得某些请求一直处于饥饿状态</li>
<li>SCAN：电梯算法，向固定方向移动，完成沿途的读取，到达末端后弹回</li>
<li>C-SCAN：到达末端后弹回首端磁道</li>
</ul>
<h1 id="文件管理"><a href="#文件管理" class="headerlink" title="文件管理"></a>文件管理</h1><ul>
<li>域(field)：是最基本的文件结构</li>
<li>记录(record)：一组域的集合，可视为应用程序的一个单元</li>
<li>文件(file)：一组记录的集合</li>
<li>数据库(database)：一组相关数据的集合</li>
</ul>
<h2 id="文件组织和访问"><a href="#文件组织和访问" class="headerlink" title="文件组织和访问"></a>文件组织和访问</h2><p>文件系统：文件系统是操作系统用于存储设备或分区上的文件存储方法和数据结构<br>选择文件组织的原则：1.快速访问 2.易于修改 3.节约存储空间 4.简单维护(maintenance) 5.可靠性(reliability)</p>
<p><center> 层次结构 </center><br><img src="http://api.xixfeng.cn/mweb/15605107901180.jpg" align="center" style="border-radius:20px;background-color: white;box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);width: 10"><br>文件组织(file organization)是指文件中记录的逻辑结构</p>
<ul>
<li>堆：堆(pile)是最简单的文件组织结构，因而对记录的访问是通过穷举查找方式进行的</li>
<li>顺序文件：关键域+顺序存储</li>
<li>索引顺序文件：关键域+顺序存储+索引，这种方式能找到离目标文件最近的位置</li>
<li>索引文件：每个域都能成为索引对象</li>
<li>直接文件或散列文件：</li>
</ul>
<h2 id="辅存管理"><a href="#辅存管理" class="headerlink" title="辅存管理"></a>辅存管理</h2><p>文件分配表(FAT,File Allocation Table)：为跟踪分配给文件的分区，应该使用那种数据结构，也决定了分配给文件何种空间</p>
<ul>
<li>连续分配(contiguous allocation)：在创建文件时，分配一组连续的空间给文件</li>
<li>链式分配(chained allocation)：链式分配基于单个块，每个块的末尾都包含指向下一块的指针</li>
<li>索引分配(index allocation)：将文件名与索引块放入文件分配表中，再在索引块中存储该文件的所有块</li>
</ul>
<p><img src="http://api.xixfeng.cn/mweb/15605167011067.jpg" align="center" style="border-radius:20px;background-color: white;box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);width: 10"></p>
<p><img src="http://api.xixfeng.cn/mweb/15605167530465.jpg" align="center" style="border-radius:20px;background-color: white;box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);width: 10"></p>
<p><img src="http://api.xixfeng.cn/mweb/15605167769994.jpg" align="center" style="border-radius:20px;background-color: white;box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);width: 10"></p>
<h1 id="选择题"><a href="#选择题" class="headerlink" title="选择题"></a>选择题</h1><p>. process、Memory management属于操作系统；I/O management、Processor不属于</p>
<p>. Resourse classes(资源分类)、Process priorities可以解决死锁问题</p>
<p>. Disk Allocation Table 存储了有关可用磁盘空间的信息</p>
<p>. 真实地址又叫绝对地址</p>
<p>. </p>
<p>. as one process down the memory hierarchy（from inboard memory to offline storage）,the following condition apply <strong>increasing access time</strong></p>
<p>. when a new block is written to the cache,the <strong>replacement strategies</strong> determines which cache location the block where be</p>
<p>. the two basic types of process register <strong>user-visiable,control/status register</strong></p>
<p>. A common class of interrupts is <strong>I/O,Timer,program </strong></p>
<p>. <strong>regulating user and process to various aspects of system </strong></p>
<p>. os frequently relinquihes cpu,and must depend on the processor to regain control of the cpu</p>
<p>. os provide <strong>error detection and response</strong> to end-user（不提供内建用户程序）</p>
<p>. a hardware feature in batch-processing system is privileged instruction（特权质量）</p>
<p>. I/O interrupts and DMA are hardware feature which is important to multiprogramming operating system</p>
<p>. the <strong>data</strong> set in program image can be changed by user（其他两个不可）</p>
<p>. in a process model that implement two suspend states,a valid state transition is represented by:<br>A. running -&gt; ready/suspend B. ready -&gt; ready/suspend<br><strong>C.</strong> all of the above D.ready/suspend -&gt; ready</p>
<h1 id="简答题"><a href="#简答题" class="headerlink" title="简答题"></a>简答题</h1><p>.从设计角度来看，操作系统有哪些模块，并简要介绍<br>进程管理<br>内存管理<br>I/O管理<br>文件管理</p>
<p>.多道批处理系统，分时系统是什么，他们之间有什么区别<br>多道批处理系统是在内存中保存多个用户进程，如果当前执行进程因为某些原因被阻塞，则调用其他进程。分时系统就是允许多个用户同时对系统进行访问，系统同时响应对个用户的请求。多道批处理系统是为了提高cpu利用率，分时系统是为了减少响应时间</p>
<p>.什么是模式切换，进程切换，他们之间的关系<br>模式切换就是指进程在用户状态和内核状态之间的切换，进程切换就是指换出当前cpu执行的进程，调用一个新的就绪态进程。模式切换不会引起进程状态的改变，大部分情况下也不会引起进程切换</p>
<p>.并发的四种挑战<br>同步：两个进程需要相互合作已完成某个功能<br>互斥：当一个进程访问临界区中的资源时，不允许其他进程再访问<br>死锁：两个或以上的进程互相等待对方完成某项事物，而都无法执行的情况<br>饥饿：一个进程处于可以执行的状态，但因为某些原因一直没有被调用</p>
<p>.什么是缺页，画图描述如何处理缺页<br>指的是当软件试图访问已映射在虚拟地址空间中，但是目前并未被加载在物理内存中的一个分页时，由中央处理器的内存管理单元所发出的中断。</p>
<p>.什么是进程调度，画图描述<br>进程调度就是指进程在七种状态下之间的切换</p>
<p>.什么是文件系统，画图描述架构<br>文件系统是用于存储设备或分区上的文件的方法和数据结构</p>
<p>.为什么操作系统如此重要<br>操作系统控制应用程序的执行，是用户程序与硬件的接口，同时也负责管理软件和硬件资源。当没有操作系统时，让用户之间操作计算机硬件是很麻烦，容易发生错误。同时让用户之间获得计算机的所有权限也是不安全的。此外一个好的操作系统能极大的提高计算机的运行效率。</p>
<p>.什么是TLB<br>TLB(Translation Lookaside Buffer)转换检测缓冲区是一个内存管理单元,用于改进虚拟地址到物理地址转换速度的缓存。</p>
<p>.PCB中有什么<br>标识符、进程状态、优先级、程序计数器、内存指针、上下文数据、I/O状态信息、记账信息</p>
<p>.临界区问题的四种标准解决方案？？？？<br>信号量、管程、消息传递、硬件的支持？？？？</p>
<p>.实现互斥的方法<br>信号量<br>管程：管程在功能上和信号量操作类似，属于一种进程同步互斥工具，但是具有与信号量操作不同的属性，管程一次只能执行一个进程，管程采用cWait cSignal（条件变量）<br>消息传递<br>硬件的支持：禁用中断、机器指令</p>
<p>.用户级进程和内核级进程的优缺点<br>见⬆️</p>
<p>.三种I/O程序<br>DMA：一个DMA模块控制内存和I/O模块之间的数据交换</p>
<p>.段页式的地址转换<br>注意 P M位在页表上，而不是段表上</p>
<p>.What is I/O buffer？Give a description of different ways of the organization of I/O buffer.<br>I/O缓冲：在输入请求发出前就开始执行输入传送，并且在输出请求发出一段时间之后才开始执行输出传送。<br>单缓冲：当用户进程发出I/O请求时，操作系统给该操作分配一个位于内存中系统部分的缓冲区。<br>双缓冲：操作系统给该操作分配两个系统缓冲区。在一个进程往一个缓冲区中传送数据（取数据）的同时，操作系统正在清空（或填充）另一个缓冲区<br>循环缓冲：当使用两个以上的缓冲区时，这组缓冲区自身被当做循环缓冲区。如果进程需要爆发式地执行大量的I/O操作，仅有双缓冲是不够的，这就需要多于两个缓冲区的方案来缓解不足。</p>
<p>.为什么要使用用户态和内核态</p>
<p>.操作系统创建了页表，操作系统启动的时候创建的页表</p>
<p>.列出延迟元素在读写磁盘的时候<br>寻道时间、旋转延迟、传输时间</p>
<p>.列出进程挂起的原因<br>交换（swapping）：操作系统需要释放足够的内存空间，以调入并执行处于就绪态的进程<br>交互式用户请求（interactive user request）：用户可能希望挂起一个程序的执行，目的是为了调试或与一个资源的使用进行连接<br>父进程请求（parent process request）：父进程可能会希望挂起后代进程的执行，以检查或修改挂起的进程，或者协调不同后代进程之间的行为<br>定时（timing）：一个进程可能会周期性地执行，而且可能在等待下一个时间间隔时被挂起<br>其他OS原因：操作系统可能挂起后台进程或工具程序进程，或者被怀疑导致问题的进程</p>
<p>.What are three objectives of an OS design？<br>方便：操作系统使计算机更易于使用。<br>有效：操作系统允许以更有效的方式使用计算机系统资源。<br>扩展的能力：在构造操作系统时，应该允许在不妨碍服务的前提下有效地开发、测试和引进新的系统功能。</p>
<h1 id="名词"><a href="#名词" class="headerlink" title="名词"></a>名词</h1><p>抖动：处理器大部分时间用于交换块而不是执行指令</p>
<h1 id="单词"><a href="#单词" class="headerlink" title="单词"></a>单词</h1><p>-|-<br>hierarchical | 分层的</p>
<p>consumable | 可消耗资源</p>

        </div>
        <!-- .entry-content -->
        <div class="single-reward">
          <div class="reward-open">赏<div class="reward-main">
              <ul class="reward-row">
                <li class="alipay-code"><img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/custom/donate/AliPayQR.jpg"></li>
                <li class="wechat-code"><img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/custom/donate/WeChanQR.jpg"></li>
              </ul>
            </div>
          </div>
        </div>
        <div style="text-align:center; width: 100%" class="social-share share-mobile" data-disabled="diandian, tencent"></div>
        <footer class="post-footer">
          <div class="post-lincenses"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="nofollow"><i class="fa fa-creative-commons" aria-hidden="true"></i> 知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a></div>
          <div class="post-tags">
          </div>
          <div class="post-share">
            <div class="social-share sharehidden share-component"></div>
            <i class="iconfont show-share icon-forward"></i>
          </div>
        </footer><!-- .entry-footer -->
      </article>
      <!-- #post-## -->
      <div class="toc" style="background: none;"></div>
      <section class="post-squares nextprev">
        
          
            <div class="post-nepre half previous">
          
            <a href="/2019/06/15/软件工程/" rel="prev">
              <div class="background">
                <img class="lazyload" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg" data-src style="width: 100%; height: 100%; object-fit: cover; pointer-events: none;" onerror="imgError(this,3)">
              </div>
              <span class="label">
              Previous Post</span>
              <div class="info">
                <h3>
                软件工程</h3>
                <hr>
              </div>
            </a>
          </div>
        
        
          
            <div class="post-nepre half next">
          
            <a href="/2019/06/01/数据库/" rel="next">
              <div class="background">
                <img class="lazyload" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg" data-src style="width: 100%; height: 100%; object-fit: cover; pointer-events: none;" onerror="imgError(this,3)">
              </div>
              <span class="label">
              Next Post</span>
              <div class="info">
                <h3>
                数据库</h3>
                <hr>
              </div>
            </a>
          </div>
        
      </section>
      
<div id="vcomments"></div>
<script>
  window.onload = function(){
      var valine = new Valine();
      valine.init({
        el: '#vcomments',
        appId: "GyC3NzMvd0hT9Yyd2hYIC0MN-gzGzoHsz",
        appKey: "mgOpfzbkHYqU92CV4IDlAUHQ",
        path: window.location.pathname,
        placeholder: "你是我一生只会遇见一次的惊喜 ..."
      })
  }
</script>

      <section class="author-profile">
        <div class="info" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a href class="profile gravatar"><img src="http://api.xixfeng.cn/IMG_4096.JPG" itemprop="image" alt height="70" width="70"></a>
          <div class="meta">
            <span class="title">Author</span>
            <h3 itemprop="name">
            <a href itemprop="url" rel="author"></a>
            </h3>
          </div>
        </div>
        <hr>
        <p><i class="iconfont icon-write"></i></p>
      </section>
    </main><!-- #main -->
  </div><!-- #primary -->
</div>


q
    </div>    
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="请输入关键词...">
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            // PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
    <!-- <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 Li Yang<br>
      powered_by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer> -->
<footer id="colophon" class="site-footer" role="contentinfo">
  <div class="site-info">
    <div class="footertext">
      <div class="img-preload">
        <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/wordpress-rotating-ball-o.svg">
        <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/disqus-preloader.svg">
      </div>
      <p style="color: #666666;">&copy 2018</p>
    </div>
    <div class="footer-device">
    <p style="font-family: 'Ubuntu', sans-serif;">
        <span style="color: #b9b9b9;">Theme <a href="https://github.com/honjun/hexo-theme-sakura" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Sakura</a> <i class="iconfont icon-sakura rotating" style="color: #ffc0cb;display:inline-block"></i> by <a href="https://2heng.xin/" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Mashiro</a>&<a href="https://www.hojun.cn/" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Hojun</a>, Powered by Hexo, Hosted by Coding Pages
        </span>
      </p>
    </div>
  </div><!-- .site-info -->
</footer>



<!-- <script src="/js/tocbot.js"></script> -->
<script type="text/javascript" src="/js/lib.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script type="text/javascript" src="/js/InsightSearch.js"></script>
<script type="text/javascript" src="/js/jquery.fancybox.min.js"></script>
<script type="text/javascript" src="/js/zoom.min.js"></script>
<script type="text/javascript" src="/js/sakura-app.js"></script>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="//unpkg.com/valine@1.3.4/dist/Valine.min.js"></script>
<!-- 不蒜子 网页计数器 -->
<script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script> -->
<script type="text/javascript">
/* <![CDATA[ */
if (/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  var Poi = {"pjax":"1","movies":{"url": "https://cdn.jsdelivr.net/gh/honjun/hojun@1.2","name":"Unbroken.mp4","live":"close"},"windowheight":"fixed","codelamp":"close","ajaxurl":"","order":"asc","formpostion":"bottom"};
} else {
  var Poi = {"pjax":"1","movies":{"url": "https://cdn.jsdelivr.net/gh/honjun/hojun@1.2","name":"Unbroken.mp4","live":"open"},"windowheight":"auto","codelamp":"close","ajaxurl":"","order":"asc","formpostion":"bottom"};
}
/* ]]> */

</script>
<script>
$(document).ready(function() {
  if ($(".toc").length > 0 && document.body.clientWidth > 1200) {
    if ($(".pattern-center").length > 0) { //有图的情况
      tocbot.init({
          // Where to render the table of contents.
          tocSelector: '.toc', // 放置目录的容器
          // Where to grab the headings to build the table of contents.
          contentSelector: '.entry-content', // 正文内容所在
          // Which headings to grab inside of the contentSelector element.
          scrollSmooth: true,
          headingSelector: 'h1, h2, h3, h4, h5', // 需要索引的标题级别
          headingsOffset: -400,
          scrollSmoothOffset: -85
      });
    } else {
      tocbot.init({
          // Where to render the table of contents.
          tocSelector: '.toc', // 放置目录的容器
          // Where to grab the headings to build the table of contents.
          contentSelector: '.entry-content', // 正文内容所在
          // Which headings to grab inside of the contentSelector element.
          scrollSmooth: true,
          headingSelector: 'h1, h2, h3, h4, h5', // 需要索引的标题级别
          headingsOffset: -85,
          scrollSmoothOffset: -85
      });
    }
    var offsetTop = $('.toc').offset().top - 95;
    window.onscroll = function() {
      var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;
      if (scrollTop >= offsetTop) {
        $('.toc').addClass('toc-fixed');
      } else {
        $('.toc').removeClass('toc-fixed');
      }
    }
  }
});
</script>

    <div class="openNav no-select" style="height: 50px;">
      <div class="iconflat no-select" style="width: 50px; height: 50px;">
        <div class="icon"></div>
      </div>
      <div class="site-branding search-form-submit">
        <i class="iconfont js-toggle-search iconsearch icon-search"></i>
      </div>
    </div>
  </section>
  <div id="mo-nav" class>
  <div class="m-avatar">
    <img src="http://api.xixfeng.cn/IMG_4096.JPG">
  </div>
  <p style="text-align: center; color: #333; font-weight: 900; font-family: 'Ubuntu', sans-serif; letter-spacing: 1.5px">katoxixfeng</p>
  <p style="text-align: center; word-spacing: 20px;">
    
      
        <a href="http://github.com/xixfeng" class="fa fa-github" target="_blank" style="color: #333; margin-left:20px"></a>
      
        <a href="https://wpa.qq.com/msgrd?v=3&uin=793651773&site=qq&menu=yes" class="fa fa-qq" target="_blank" style="color: #25c6fe; margin-left:20px"></a>
      
    
  </p>
  <ul id="menu-new-1" class="menu">
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
            首页
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/archives">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-archive faa-shake" aria-hidden="true"></i>
            归档
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/categories/技术/">
                  <i class="fa fa-code" aria-hidden="true"></i>
                  技术
                </a>
              </li>
            
              <li>
                <a href="/categories/生活/">
                  <i class="fa fa-file-text-o" aria-hidden="true"></i>
                  生活
                </a>
              </li>
            
              <li>
                <a href="/categories/资源/">
                  <i class="fa fa-cloud-download" aria-hidden="true"></i>
                  资源
                </a>
              </li>
            
              <li>
                <a href="/categories/随想/">
                  <i class="fa fa-commenting-o" aria-hidden="true"></i>
                  随想
                </a>
              </li>
            
              <li>
                <a href="/categories/转载/">
                  <i class="fa fa-book" aria-hidden="true"></i>
                  转载
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="javascript:;">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-list-ul faa-vertical" aria-hidden="true"></i>
            清单
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/tags/悦读/">
                  <i class="fa fa-th-list faa-bounce" aria-hidden="true"></i>
                  书单
                </a>
              </li>
            
              <li>
                <a href="/bangumi/">
                  <i class="fa fa-film faa-vertical" aria-hidden="true"></i>
                  番组
                </a>
              </li>
            
              <li>
                <a href="/music/">
                  <i class="fa fa-headphones" aria-hidden="true"></i>
                  歌单
                </a>
              </li>
            
              <li>
                <a href="/tags/图集/">
                  <i class="fa fa-photo" aria-hidden="true"></i>
                  图集
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-leaf faa-wrench" aria-hidden="true"></i>
            关于
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/about/">
                  <i class="fa fa-meetup" aria-hidden="true"></i>
                  我？
                </a>
              </li>
            
              <li>
                <a href="/theme-sakura/">
                  <i class="fa iconfont icon-sakura" aria-hidden="true"></i>
                  主题
                </a>
              </li>
            
              <li>
                <a href="/lab/">
                  <i class="fa fa-cogs" aria-hidden="true"></i>
                  Lab
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="/client/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-android faa-vertical" aria-hidden="true"></i>
            客户端
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/atom.xml">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-rss faa-pulse" aria-hidden="true"></i>
            RSS
          </span>
        </a>
        
      </li>
    
  </ul>
  <p style="text-align: center; font-size: 13px; color: #b9b9b9;">&copy 2019 hexo-sakura</p>
</div>
<button onclick="topFunction()" class="mobile-cd-top" id="moblieGoTop" title="Go to top" style="display: none;"><i class="fa fa-chevron-up" aria-hidden="true"></i></button>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.js"></script>
<style>
  .aplayer .aplayer-lrc {
    height: 35px;
  }
  .aplayer .aplayer-lrc p{
    font-size: 16px;
    font-weight: 700;
    line-height: 18px !important;
  }
  .aplayer .aplayer-lrc p.aplayer-lrc-current{
    color: #FF1493;
  }
  .aplayer.aplayer-narrow .aplayer-body{
    left: -66px !important;
  }
  .aplayer.aplayer-fixed .aplayer-lrc {
    display: none;
  }
  .aplayer .aplayer-lrc.aplayer-lrc-hide {
      display:none !important;
  }
  .aplayer.aplayer-fixed .lrc-show {
    display: block;
    background: rgba(255, 255, 255, 0.8);
  }
</style>
<div class="aplayer" data-id="2660651585" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="false" data-loop="all" data-order="random" data-preload="auto" data-volume="0.7" data-mutex="true" < div>
<script src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script>
<script>
  $(function(){
    $('body').on('click', '.aplayer', function(){
      if($('.aplayer-button').hasClass('aplayer-play')) {
        $('.aplayer-lrc').removeClass('lrc-show');
      } else {
        $('.aplayer-lrc').addClass('lrc-show');
      }
    })
  });
</script></div>
</body>
</html>